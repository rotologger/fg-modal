{"version":3,"file":"fg-modal/view.js","mappings":"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","sources":["webpack://fg-modal/./src/fg-modal/view.js"],"sourcesContent":["class FGModal {\n\tconstructor() {\n\t\tthis.modals = document.querySelectorAll(\".wp-block-create-block-fg-modal\");\n\n\t\tthis.events();\n\t}\n\n\tevents() {\n\t\tthis.modals?.forEach((modal, index) => {\n\t\t\tconst showOnPageLoad = modal.dataset.showonpageload == 1 ? true : false;\n\t\t\tconst delay = modal.dataset.delay;\n\t\t\tconst selector = modal.dataset.selector;\n\t\t\tconst closeBtn = modal.querySelector(\".close-btn\");\n\n\t\t\tif (showOnPageLoad) {\n\t\t\t\tsetTimeout(() => this.show(modal, index), delay);\n\t\t\t}\n\n\t\t\tif (selector) {\n\t\t\t\tdocument\n\t\t\t\t\t.querySelectorAll(selector)\n\t\t\t\t\t?.forEach((el) =>\n\t\t\t\t\t\tel.addEventListener(\"click\", () => this.show(modal)),\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tmodal.addEventListener(\"click\", (e) => {\n\t\t\t\tif (e.target.classList.contains(\"wp-block-create-block-fg-modal\")) {\n\t\t\t\t\tthis.hide(modal, index);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcloseBtn.addEventListener(\"click\", () => {\n\t\t\t\tthis.hide(modal, index);\n\t\t\t});\n\n\t\t\tdocument.addEventListener(\"keydown\", (e) => {\n\t\t\t\tif (e.key === \"Escape\" && !modal.classList.contains(\"hidden\"))\n\t\t\t\t\tthis.hide(modal, index);\n\t\t\t});\n\t\t});\n\t}\n\n\tshow(modal, index = \"\") {\n\t\tif (!this.getCookie(`seenModal-${index}`)) {\n\t\t\tthis.restoreYoutubeVideo(modal);\n\n\t\t\tmodal.classList.remove(\"hidden\");\n\t\t\tdocument.body.style.overflowY = \"hidden\";\n\t\t}\n\t}\n\n\thide(modal, index) {\n\t\tconst setCookie = modal.dataset.setcookie === \"1\" ? true : false;\n\t\tconst expiresAfter = modal.dataset.expiresafter * 1;\n\n\t\tthis.stopYoutubeVideo(modal);\n\n\t\tmodal.classList.add(\"hidden\");\n\t\tdocument.body.style.overflowY = \"scroll\";\n\n\t\tif (setCookie)\n\t\t\tthis.createCookie(`seenModal-${index}`, \"true\", expiresAfter);\n\t}\n\n\tcreateCookie = (name, value, minutes) => {\n\t\tlet expires = \"\";\n\t\tif (minutes) {\n\t\t\tlet date = new Date();\n\t\t\tdate.setTime(date.getTime() + minutes * 60 * 1000);\n\t\t\texpires = \"; expires=\" + date.toGMTString();\n\t\t}\n\t\tdocument.cookie = name + \"=\" + value + expires + \"; path=/\";\n\t};\n\n\tgetCookie = (name) => {\n\t\tvar dc = document.cookie;\n\t\tvar prefix = name + \"=\";\n\t\tvar begin = dc.indexOf(\"; \" + prefix);\n\t\tif (begin == -1) {\n\t\t\tbegin = dc.indexOf(prefix);\n\t\t\tif (begin != 0) return null;\n\t\t} else {\n\t\t\tbegin += 2;\n\t\t\tvar end = document.cookie.indexOf(\";\", begin);\n\t\t\tif (end == -1) {\n\t\t\t\tend = dc.length;\n\t\t\t}\n\t\t}\n\n\t\treturn decodeURI(dc.substring(begin + prefix.length, end));\n\t};\n\n\tstopYoutubeVideo(modal) {\n\t\tconst iframe = modal.querySelector(\"iframe\");\n\t\tif (\n\t\t\tiframe &&\n\t\t\t(iframe.src.includes(\"youtube.com\") || iframe.src.includes(\"youtu.be\"))\n\t\t) {\n\t\t\tif (!iframe.dataset.originalsrc) {\n\t\t\t\tiframe.dataset.originalsrc = iframe.src;\n\t\t\t}\n\t\t\tiframe.src = \"\";\n\t\t}\n\t}\n\n\trestoreYoutubeVideo(modal) {\n\t\tconst iframe = modal.querySelector(\"iframe\");\n\t\tif (iframe && iframe.dataset.originalsrc) {\n\t\t\tiframe.src = iframe.dataset.originalsrc;\n\t\t}\n\t}\n}\n\nconst fgModal = new FGModal();\n"],"names":["FGModal","constructor","modals","document","querySelectorAll","events","forEach","modal","index","showOnPageLoad","dataset","showonpageload","delay","selector","closeBtn","querySelector","setTimeout","show","el","addEventListener","e","target","classList","contains","hide","key","getCookie","restoreYoutubeVideo","remove","body","style","overflowY","setCookie","setcookie","expiresAfter","expiresafter","stopYoutubeVideo","add","createCookie","name","value","minutes","expires","date","Date","setTime","getTime","toGMTString","cookie","dc","prefix","begin","indexOf","end","length","decodeURI","substring","iframe","src","includes","originalsrc","fgModal"],"sourceRoot":""}